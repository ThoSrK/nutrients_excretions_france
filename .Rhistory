"Total Porcins", "Truies reproductrices de 50 kg ou plus",
"Volailles"),
UNITE == "Cheptel correspondant (têtes)", #je ne veux pas en UGB
COM != "............") %>%
#possibilité d'affiner les catégories de livestock
mutate(
LIVESTOCK_TYPE = case_when(#obligé de supprimer les espaces pour les futurs titres de colonnes
LIVESTOCK_TYPE == "Total Bovins" ~ "Total_Bovins",
LIVESTOCK_TYPE == "Total Equidés" ~ "Total_Equidés",
LIVESTOCK_TYPE == "Total Caprins" ~ "Total_Caprins",
LIVESTOCK_TYPE == "Total Ovins" ~ "Total_Ovins",
LIVESTOCK_TYPE == "Total Porcins" ~ "Total_Porcins",
LIVESTOCK_TYPE == "Volailles" ~ "Volailles")) %>%
dplyr::select(-Year, -FRDOM, -FARM_SIZE, -UNITE)
RA_livestock <- file_RA_livestock %>%
dplyr::select(
Year = ANNREF, #il n'y a que l'année 2010 en fait
FRDOM, INSEE_REG = REGION, INSEE_DEP = DEP, INSEE_COM = COM,
FARM_SIZE = G_2141_LIB_DIM1,
LIVESTOCK_TYPE = G_2141_LIB_DIM2,
UNITE = G_2141_LIB_DIM3,
VALUE = VALEUR)
RA_livestock <- RA_livestock %>%
filter(
FARM_SIZE == "Ensemble des exploitations (hors pacages collectifs)", #pas de filtre sur la taille des exploitations
FRDOM == "METRO", #garder que métropole
LIVESTOCK_TYPE %in% c(
"Total Bovins", "Vaches laitières", "Vaches allaitantes",
"Total Equidés",
"Total Caprins", "Chèvres",
"Total Ovins", "Brebis laitières", "Brebis nourrices",
"Total Porcins", "Truies reproductrices de 50 kg ou plus",
"Volailles"),
UNITE == "Cheptel correspondant (têtes)", #je ne veux pas en UGB
COM != "............") %>%
#possibilité d'affiner les catégories de livestock
# mutate(
#   LIVESTOCK_TYPE = case_when(#obligé de supprimer les espaces pour les futurs titres de colonnes
#     LIVESTOCK_TYPE == "Total Bovins" ~ "Total_Bovins",
#     LIVESTOCK_TYPE == "Total Equidés" ~ "Total_Equidés",
#     LIVESTOCK_TYPE == "Total Caprins" ~ "Total_Caprins",
#     LIVESTOCK_TYPE == "Total Ovins" ~ "Total_Ovins",
#     LIVESTOCK_TYPE == "Total Porcins" ~ "Total_Porcins",
#     LIVESTOCK_TYPE == "Volailles" ~ "Volailles")) %>%
dplyr::select(-Year, -FRDOM, -FARM_SIZE, -UNITE)
RA_livestock <- file_RA_livestock %>%
dplyr::select(
Year = ANNREF, #il n'y a que l'année 2010 en fait
FRDOM, INSEE_REG = REGION, INSEE_DEP = DEP, INSEE_COM = COM,
FARM_SIZE = G_2141_LIB_DIM1,
LIVESTOCK_TYPE = G_2141_LIB_DIM2,
UNITE = G_2141_LIB_DIM3,
VALUE = VALEUR)
RA_livestock <- RA_livestock %>%
dplyr::filter(
FARM_SIZE == "Ensemble des exploitations (hors pacages collectifs)", #pas de filtre sur la taille des exploitations
FRDOM == "METRO", #garder que métropole
LIVESTOCK_TYPE %in% c(
"Total Bovins", "Vaches laitières", "Vaches allaitantes",
"Total Equidés",
"Total Caprins", "Chèvres",
"Total Ovins", "Brebis laitières", "Brebis nourrices",
"Total Porcins", "Truies reproductrices de 50 kg ou plus",
"Volailles"),
UNITE == "Cheptel correspondant (têtes)", #je ne veux pas en UGB
COM != "............") %>%
#possibilité d'affiner les catégories de livestock
# mutate(
#   LIVESTOCK_TYPE = case_when(#obligé de supprimer les espaces pour les futurs titres de colonnes
#     LIVESTOCK_TYPE == "Total Bovins" ~ "Total_Bovins",
#     LIVESTOCK_TYPE == "Total Equidés" ~ "Total_Equidés",
#     LIVESTOCK_TYPE == "Total Caprins" ~ "Total_Caprins",
#     LIVESTOCK_TYPE == "Total Ovins" ~ "Total_Ovins",
#     LIVESTOCK_TYPE == "Total Porcins" ~ "Total_Porcins",
#     LIVESTOCK_TYPE == "Volailles" ~ "Volailles")) %>%
dplyr::select(-Year, -FRDOM, -FARM_SIZE, -UNITE)
View(RA_livestock)
RA_livestock <- file_RA_livestock %>%
dplyr::select(
Year = ANNREF, #il n'y a que l'année 2010 en fait
FRDOM, INSEE_REG = REGION, INSEE_DEP = DEP, INSEE_COM = COM,
FARM_SIZE = G_2141_LIB_DIM1,
LIVESTOCK_TYPE = G_2141_LIB_DIM2,
UNITE = G_2141_LIB_DIM3,
VALUE = VALEUR)
RA_livestock <- RA_livestock %>%
dplyr::filter(
FARM_SIZE == "Ensemble des exploitations (hors pacages collectifs)", #pas de filtre sur la taille des exploitations
FRDOM == "METRO", #garder que métropole
LIVESTOCK_TYPE %in% c(
"Total Bovins", "Vaches laitières", "Vaches allaitantes",
"Total Equidés",
"Total Caprins", "Chèvres",
"Total Ovins", "Brebis laitières", "Brebis nourrices",
"Total Porcins", "Truies reproductrices de 50 kg ou plus",
"Volailles"),
UNITE == "Cheptel correspondant (têtes)", #je ne veux pas en UGB
) %>%
#possibilité d'affiner les catégories de livestock
# mutate(
#   LIVESTOCK_TYPE = case_when(#obligé de supprimer les espaces pour les futurs titres de colonnes
#     LIVESTOCK_TYPE == "Total Bovins" ~ "Total_Bovins",
#     LIVESTOCK_TYPE == "Total Equidés" ~ "Total_Equidés",
#     LIVESTOCK_TYPE == "Total Caprins" ~ "Total_Caprins",
#     LIVESTOCK_TYPE == "Total Ovins" ~ "Total_Ovins",
#     LIVESTOCK_TYPE == "Total Porcins" ~ "Total_Porcins",
#     LIVESTOCK_TYPE == "Volailles" ~ "Volailles")) %>%
dplyr::select(-Year, -FRDOM, -FARM_SIZE, -UNITE)
RA_livestock <- file_RA_livestock %>%
dplyr::select(
Year = ANNREF, #il n'y a que l'année 2010 en fait
FRDOM, INSEE_REG = REGION, INSEE_DEP = DEP, INSEE_COM = COM,
FARM_SIZE = G_2141_LIB_DIM1,
LIVESTOCK_TYPE = G_2141_LIB_DIM2,
UNITE = G_2141_LIB_DIM3,
VALUE = VALEUR)
RA_livestock <- RA_livestock %>%
dplyr::filter(
FARM_SIZE == "Ensemble des exploitations (hors pacages collectifs)", #pas de filtre sur la taille des exploitations
FRDOM == "METRO", #garder que métropole
LIVESTOCK_TYPE %in% c(
"Total Bovins", "Vaches laitières", "Vaches allaitantes",
"Total Equidés",
"Total Caprins", "Chèvres",
"Total Ovins", "Brebis laitières", "Brebis nourrices",
"Total Porcins", "Truies reproductrices de 50 kg ou plus",
"Volailles"),
UNITE == "Cheptel correspondant (têtes)" #je ne veux pas en UGB
) %>%
#possibilité d'affiner les catégories de livestock
# mutate(
#   LIVESTOCK_TYPE = case_when(#obligé de supprimer les espaces pour les futurs titres de colonnes
#     LIVESTOCK_TYPE == "Total Bovins" ~ "Total_Bovins",
#     LIVESTOCK_TYPE == "Total Equidés" ~ "Total_Equidés",
#     LIVESTOCK_TYPE == "Total Caprins" ~ "Total_Caprins",
#     LIVESTOCK_TYPE == "Total Ovins" ~ "Total_Ovins",
#     LIVESTOCK_TYPE == "Total Porcins" ~ "Total_Porcins",
#     LIVESTOCK_TYPE == "Volailles" ~ "Volailles")) %>%
dplyr::select(-Year, -FRDOM, -FARM_SIZE, -UNITE)
RA_livestock <- file_RA_livestock %>%
dplyr::select(
Year = ANNREF, #il n'y a que l'année 2010 en fait
FRDOM, INSEE_REG = REGION, INSEE_DEP = DEP, INSEE_COM = COM,
FARM_SIZE = G_2141_LIB_DIM1,
LIVESTOCK_TYPE = G_2141_LIB_DIM2,
UNITE = G_2141_LIB_DIM3,
VALUE = VALEUR)
RA_livestock <- RA_livestock %>%
dplyr::filter(
FARM_SIZE == "Ensemble des exploitations (hors pacages collectifs)", #pas de filtre sur la taille des exploitations
FRDOM == "METRO", #garder que métropole
LIVESTOCK_TYPE %in% c(
"Total Bovins", "Vaches laitières", "Vaches allaitantes",
"Total Equidés",
"Total Caprins", "Chèvres",
"Total Ovins", "Brebis laitières", "Brebis nourrices",
"Total Porcins", "Truies reproductrices de 50 kg ou plus",
"Volailles"),
UNITE == "Cheptel correspondant (têtes)", #je ne veux pas en UGB
INSEE_COM != "............") %>%
#possibilité d'affiner les catégories de livestock
# mutate(
#   LIVESTOCK_TYPE = case_when(#obligé de supprimer les espaces pour les futurs titres de colonnes
#     LIVESTOCK_TYPE == "Total Bovins" ~ "Total_Bovins",
#     LIVESTOCK_TYPE == "Total Equidés" ~ "Total_Equidés",
#     LIVESTOCK_TYPE == "Total Caprins" ~ "Total_Caprins",
#     LIVESTOCK_TYPE == "Total Ovins" ~ "Total_Ovins",
#     LIVESTOCK_TYPE == "Total Porcins" ~ "Total_Porcins",
#     LIVESTOCK_TYPE == "Volailles" ~ "Volailles")) %>%
dplyr::select(-Year, -FRDOM, -FARM_SIZE, -UNITE)
RA_livestock <- file_RA_livestock %>%
dplyr::select(
Year = ANNREF, #il n'y a que l'année 2010 en fait
FRDOM, INSEE_REG = REGION, INSEE_DEP = DEP, INSEE_COM = COM,
FARM_SIZE = G_2141_LIB_DIM1,
LIVESTOCK_TYPE = G_2141_LIB_DIM2,
UNITE = G_2141_LIB_DIM3,
VALUE = VALEUR)
RA_livestock <- RA_livestock %>%
# dplyr::filter(
#   FARM_SIZE == "Ensemble des exploitations (hors pacages collectifs)", #pas de filtre sur la taille des exploitations
#   FRDOM == "METRO", #garder que métropole
#   LIVESTOCK_TYPE %in% c(
#     "Total Bovins", "Vaches laitières", "Vaches allaitantes",
#     "Total Equidés",
#     "Total Caprins", "Chèvres",
#     "Total Ovins", "Brebis laitières", "Brebis nourrices",
#     "Total Porcins", "Truies reproductrices de 50 kg ou plus",
#     "Volailles"),
#   UNITE == "Cheptel correspondant (têtes)", #je ne veux pas en UGB
#   INSEE_COM != "............") %>%
dplyr::filter(
FARM_SIZE == "Ensemble des exploitations (hors pacages collectifs)", #pas de filtre sur la taille des exploitations
FRDOM == "METRO", #garder que métropole
LIVESTOCK_TYPE %in% c(
"Total Bovins",
"Total Equidés",
"Total Caprins",
"Total Ovins",
"Total Porcins",
"Volailles"),
UNITE == "Cheptel correspondant (têtes)", #je ne veux pas en UGB
INSEE_COM != "............") %>%
#possibilité d'affiner les catégories de livestock
# mutate(
#   LIVESTOCK_TYPE = case_when(#obligé de supprimer les espaces pour les futurs titres de colonnes
#     LIVESTOCK_TYPE == "Total Bovins" ~ "Total_Bovins",
#     LIVESTOCK_TYPE == "Total Equidés" ~ "Total_Equidés",
#     LIVESTOCK_TYPE == "Total Caprins" ~ "Total_Caprins",
#     LIVESTOCK_TYPE == "Total Ovins" ~ "Total_Ovins",
#     LIVESTOCK_TYPE == "Total Porcins" ~ "Total_Porcins",
#     LIVESTOCK_TYPE == "Volailles" ~ "Volailles")) %>%
dplyr::select(-Year, -FRDOM, -FARM_SIZE, -UNITE)
#departmental
test <- RA_livestock %>% dplyr::filter(is.na(VALUE) == F) %>%
dplyr::group_by(RG, DEP, LIVESTOCK_TYPE) %>% dplyr::summarise(VALUE = sum(VALUE))
#departmental
test <- RA_livestock %>% dplyr::filter(is.na(VALUE) == F) %>%
dplyr::group_by(INSEE_REG, INSEE_DEP, LIVESTOCK_TYPE) %>% dplyr::summarise(VALUE = sum(VALUE))
View(test)
unique(RA_livestock$INSEE_REG)
RA_livestock <- RA_livestock %>%
# dplyr::filter(
#   FARM_SIZE == "Ensemble des exploitations (hors pacages collectifs)", #pas de filtre sur la taille des exploitations
#   FRDOM == "METRO", #garder que métropole
#   LIVESTOCK_TYPE %in% c(
#     "Total Bovins", "Vaches laitières", "Vaches allaitantes",
#     "Total Equidés",
#     "Total Caprins", "Chèvres",
#     "Total Ovins", "Brebis laitières", "Brebis nourrices",
#     "Total Porcins", "Truies reproductrices de 50 kg ou plus",
#     "Volailles"),
#   UNITE == "Cheptel correspondant (têtes)", #je ne veux pas en UGB
#   INSEE_COM != "............") %>%
dplyr::filter(
FARM_SIZE == "Ensemble des exploitations (hors pacages collectifs)", #pas de filtre sur la taille des exploitations
FRDOM == "METRO", #garder que métropole
LIVESTOCK_TYPE %in% c(
"Total Bovins",
"Total Equidés",
"Total Caprins",
"Total Ovins",
"Total Porcins",
"Volailles"),
UNITE == "Cheptel correspondant (têtes)", #je ne veux pas en UGB
INSEE_COM != "............") %>%
#possibilité d'affiner les catégories de livestock
# mutate(
#   LIVESTOCK_TYPE = case_when(#obligé de supprimer les espaces pour les futurs titres de colonnes
#     LIVESTOCK_TYPE == "Total Bovins" ~ "Total_Bovins",
#     LIVESTOCK_TYPE == "Total Equidés" ~ "Total_Equidés",
#     LIVESTOCK_TYPE == "Total Caprins" ~ "Total_Caprins",
#     LIVESTOCK_TYPE == "Total Ovins" ~ "Total_Ovins",
#     LIVESTOCK_TYPE == "Total Porcins" ~ "Total_Porcins",
#     LIVESTOCK_TYPE == "Volailles" ~ "Volailles")) %>%
dplyr::select(-Year, -FRDOM, -FARM_SIZE, -UNITE) %>%
mutate(INSEE_REG = substring(INSEE_REG, 3)) #removes the "NR" in region indice
RA_livestock <- file_RA_livestock %>%
dplyr::select(
Year = ANNREF, #il n'y a que l'année 2010 en fait
FRDOM, INSEE_REG = REGION, INSEE_DEP = DEP, INSEE_COM = COM,
FARM_SIZE = G_2141_LIB_DIM1,
LIVESTOCK_TYPE = G_2141_LIB_DIM2,
UNITE = G_2141_LIB_DIM3,
VALUE = VALEUR)
RA_livestock <- RA_livestock %>%
# dplyr::filter(
#   FARM_SIZE == "Ensemble des exploitations (hors pacages collectifs)", #pas de filtre sur la taille des exploitations
#   FRDOM == "METRO", #garder que métropole
#   LIVESTOCK_TYPE %in% c(
#     "Total Bovins", "Vaches laitières", "Vaches allaitantes",
#     "Total Equidés",
#     "Total Caprins", "Chèvres",
#     "Total Ovins", "Brebis laitières", "Brebis nourrices",
#     "Total Porcins", "Truies reproductrices de 50 kg ou plus",
#     "Volailles"),
#   UNITE == "Cheptel correspondant (têtes)", #je ne veux pas en UGB
#   INSEE_COM != "............") %>%
dplyr::filter(
FARM_SIZE == "Ensemble des exploitations (hors pacages collectifs)", #pas de filtre sur la taille des exploitations
FRDOM == "METRO", #garder que métropole
LIVESTOCK_TYPE %in% c(
"Total Bovins",
"Total Equidés",
"Total Caprins",
"Total Ovins",
"Total Porcins",
"Volailles"),
UNITE == "Cheptel correspondant (têtes)", #je ne veux pas en UGB
INSEE_COM != "............") %>%
#possibilité d'affiner les catégories de livestock
# mutate(
#   LIVESTOCK_TYPE = case_when(#obligé de supprimer les espaces pour les futurs titres de colonnes
#     LIVESTOCK_TYPE == "Total Bovins" ~ "Total_Bovins",
#     LIVESTOCK_TYPE == "Total Equidés" ~ "Total_Equidés",
#     LIVESTOCK_TYPE == "Total Caprins" ~ "Total_Caprins",
#     LIVESTOCK_TYPE == "Total Ovins" ~ "Total_Ovins",
#     LIVESTOCK_TYPE == "Total Porcins" ~ "Total_Porcins",
#     LIVESTOCK_TYPE == "Volailles" ~ "Volailles")) %>%
dplyr::select(-Year, -FRDOM, -FARM_SIZE, -UNITE) %>%
mutate(INSEE_REG = substring(INSEE_REG, 3)) #removes the "NR" in region indice
unique(RA_livestock$INSEE_REG)
unique(RA_livestock$INSEE_DEP)
unique(fra_dep$INSEE_DEP)
unique(reorder(fra_dep$INSEE_DEP))
unique(order(fra_dep$INSEE_DEP))
unique(order(RA_livestock$INSEE_DEP))
unique(RA_livestock$INSEE_DEP)
unique(fra_dep$INSEE_DEP)
MAP_DEP <- fra_dep
MAP_DEP <- RA_livestock %>% dplyr::filter(is.na(VALUE) == F) %>%
dplyr::group_by(INSEE_REG, INSEE_DEP, LIVESTOCK_TYPE) %>% dplyr::summarise(VALUE = sum(VALUE)) %>%
full_join(MAP_DEP, ., by="INSEE_DEP")
g <- ggplot(MAP_DEP) + labs(fill = "nb") +
geom_sf(aes(fill = VALUE/10^3), color = NA) +
coord_sf(datum = NA, expand = FALSE) +  # enlever l'affichage des coordonnés et de la grille
ggtitle("Nb animaux") +  scale_fill_gradientn(colours = c("grey","yellow", "orange","red")) +
theme(panel.background = element_blank(), plot.title = element_text(hjust = 0.5, size = 16)) +
facet_wrap(vars(LIVESTOCK_TYPE))
ggsave("test.pdf", g, w=10, h=8)
MAP_DEP <- MAP_DEP %>% dplyr::filter(LIVESTOCK_TYPE == "Total Bovins")
g <- ggplot(MAP_DEP) + labs(fill = "nb") +
geom_sf(aes(fill = VALUE/10^3), color = NA) +
coord_sf(datum = NA, expand = FALSE) +  # enlever l'affichage des coordonnés et de la grille
ggtitle("Nb animaux") +  scale_fill_gradientn(colours = c("grey","yellow", "orange","red")) +
theme(panel.background = element_blank(), plot.title = element_text(hjust = 0.5, size = 16)) +
facet_wrap(vars(LIVESTOCK_TYPE))
ggsave("test.pdf", g, w=10, h=8)
g <- ggplot(MAP_DEP) + labs(fill = "nb") +
geom_sf(aes(fill = VALUE), color = NA) +
coord_sf(datum = NA, expand = FALSE) +  # enlever l'affichage des coordonnés et de la grille
ggtitle("Nb animaux") +  scale_fill_gradientn(colours = c("grey","yellow", "orange","red")) +
theme(panel.background = element_blank(), plot.title = element_text(hjust = 0.5, size = 16))
ggsave("test.pdf", g, w=10, h=8)
View(MAP_DEP)
g <- ggplot(fra_dep) + labs(fill = "nb") +
geom_sf(aes(), fill = grey, color = NA) +
coord_sf(datum = NA, expand = FALSE) +  # enlever l'affichage des coordonnés et de la grille
ggtitle("Nb animaux") +
theme(panel.background = element_blank(), plot.title = element_text(hjust = 0.5, size = 16))
ggsave("test.pdf", g, w=10, h=8)
g <- ggplot(fra_dep) +
geom_sf(aes(), fill = grey, color = NA) +
coord_sf(datum = NA, expand = FALSE) +  # enlever l'affichage des coordonnés et de la grille
theme(panel.background = element_blank(), plot.title = element_text(hjust = 0.5, size = 16))
ggsave("test.pdf", g, w=10, h=8)
ggplot(fra_dep) +
geom_sf(aes(), fill = grey, colour = NA)
ggplot(fra_dep) + labs(fill = "ktN") +
geom_sf(aes(), color = "black", size = 0.2) +
coord_sf(datum = NA, expand = FALSE) +  # enlever l'affichage des coordonnés et de la grille
theme(panel.background = element_blank(), plot.title = element_text(hjust = 0.5, size = 16))
ggplot(fra_dep) + labs(fill = "ktN") +
geom_sf(aes(), color = "black", size = 0.2) +
coord_sf(datum = NA, expand = FALSE) +  # enlever l'affichage des coordonnés et de la grille
theme(panel.background = element_blank(), plot.title = element_text(hjust = 0.5, size = 16))
ggplot(fra_dep) +
geom_sf(aes(), color = "black", size = 0.2) +
coord_sf(datum = NA, expand = FALSE) +  # enlever l'affichage des coordonnés et de la grille
theme(panel.background = element_blank(), plot.title = element_text(hjust = 0.5, size = 16))
#region
ggplot(fra_reg) +
geom_sf(aes(), color = "black", size = 0.2) +
coord_sf(datum = NA, expand = FALSE) +  # enlever l'affichage des coordonnés et de la grille
theme(panel.background = element_blank(), plot.title = element_text(hjust = 0.5, size = 16))
#cimmune
ggplot(fra_comm) +
geom_sf(aes(), color = "black", size = 0.2) +
coord_sf(datum = NA, expand = FALSE) +  # enlever l'affichage des coordonnés et de la grille
theme(panel.background = element_blank(), plot.title = element_text(hjust = 0.5, size = 16))
#region
ggplot(fra_reg) +
geom_sf(aes(), fill = "black", colour = NA) +
coord_sf(datum = NA, expand = FALSE) +  # enlever l'affichage des coordonnés et de la grille
theme(panel.background = element_blank(), plot.title = element_text(hjust = 0.5, size = 16))
ggplot(MAP_DEP) +
geom_sf(aes(fill = VALUE), color = "black", size = 0.2) +
coord_sf(datum = NA, expand = FALSE) +  # enlever l'affichage des coordonnés et de la grille
theme(panel.background = element_blank(), plot.title = element_text(hjust = 0.5, size = 16))
ggplot(MAP_DEP) +
geom_sf(aes(fill = VALUE), color = "black", size = 0.2) +
coord_sf(datum = NA, expand = FALSE) +  # enlever l'affichage des coordonnés et de la grille
theme(panel.background = element_blank(), plot.title = element_text(hjust = 0.5, size = 16)) +
scale_fill_gradientn(colours = c("white", "orange","red")) +
#departmental
test <- RA_livestock %>% dplyr::filter(is.na(VALUE) == F) %>%
dplyr::group_by(INSEE_REG, INSEE_DEP, LIVESTOCK_TYPE) %>% dplyr::summarise(VALUE = sum(VALUE))
ggplot(MAP_DEP) +
geom_sf(aes(fill = VALUE), color = "black", size = 0.2) +
coord_sf(datum = NA, expand = FALSE) +  # enlever l'affichage des coordonnés et de la grille
theme(panel.background = element_blank(), plot.title = element_text(hjust = 0.5, size = 16)) +
scale_fill_gradientn(colours = c("white", "orange","red"))
MAP_DEP <- fra_dep
MAP_DEP <- RA_livestock %>% dplyr::filter(is.na(VALUE) == F) %>%
dplyr::group_by(INSEE_REG, INSEE_DEP, LIVESTOCK_TYPE) %>% dplyr::summarise(VALUE = sum(VALUE)) %>%
full_join(MAP_DEP, ., by="INSEE_DEP")
g <- ggplot(MAP_DEP) +
geom_sf(aes(fill = VALUE), color = "black", size = 0.2) +
coord_sf(datum = NA, expand = FALSE) +  # enlever l'affichage des coordonnés et de la grille
theme(panel.background = element_blank(), plot.title = element_text(hjust = 0.5, size = 16)) +
scale_fill_gradientn(colours = c("white", "orange","red")) +
facet_wrap(vars(LIVESTOCK_TYPE))
ggsave("test.pdf", g, w=10, h=8)
MAP_DEP <- fra_dep
MAP_DEP <- fra_dep
MAP_DEP <- RA_livestock %>% dplyr::filter(is.na(VALUE) == F) %>%
dplyr::group_by(INSEE_REG, INSEE_DEP, LIVESTOCK_TYPE) %>% dplyr::summarise(VALUE = sum(VALUE)) %>%
full_join(MAP_DEP, ., by="INSEE_DEP")
MAP_DEP <- MAP_DEP %>% dplyr::filter(LIVESTOCK_TYPE == "Total Bovins")
g <- ggplot(MAP_DEP) +
geom_sf(aes(fill = VALUE), color = "black", size = 0.2) +
coord_sf(datum = NA, expand = FALSE) +  # enlever l'affichage des coordonnés et de la grille
theme(panel.background = element_blank(), plot.title = element_text(hjust = 0.5, size = 16)) +
scale_fill_gradientn(colours = c("white", "orange","red"))
ggsave("test.pdf", g, w=10, h=8)
View(MAP_DEP)
unique(MAP_DEP$LIVESTOCK_TYPE)
MAP_DEP <- fra_dep
MAP_DEP <- RA_livestock %>% dplyr::filter(is.na(VALUE) == F) %>%
dplyr::group_by(INSEE_REG, INSEE_DEP, LIVESTOCK_TYPE) %>% dplyr::summarise(VALUE = sum(VALUE)) %>%
full_join(MAP_DEP, ., by="INSEE_DEP")
g <- ggplot(MAP_DEP) +
geom_sf(aes(fill = VALUE), color = "black", size = 0.2) +
coord_sf(datum = NA, expand = FALSE) +  # enlever l'affichage des coordonnés et de la grille
theme(panel.background = element_blank(), plot.title = element_text(hjust = 0.5, size = 16)) +
scale_fill_gradientn(colours = c("white", "orange","red"))
ggsave("test.pdf", g, w=10, h=8)
unique(MAP_DEP$LIVESTOCK_TYPE)
MAP_DEP <- MAP_DEP %>% dplyr::filter(is.na(LIVESTOCK_TYPE) == F)
g <- ggplot(MAP_DEP) +
geom_sf(aes(fill = VALUE), color = "black", size = 0.2) +
coord_sf(datum = NA, expand = FALSE) +  # enlever l'affichage des coordonnés et de la grille
theme(panel.background = element_blank(), plot.title = element_text(hjust = 0.5, size = 16)) +
scale_fill_gradientn(colours = c("white", "orange","red")) +
facet_wrap(vars(LIVESTOCK_TYPE))
ggsave("test.pdf", g, w=10, h=8)
MAP_DEP <- fra_dep
MAP_DEP <- RA_livestock %>% dplyr::filter(is.na(VALUE) == F) %>%
dplyr::group_by(INSEE_REG, INSEE_DEP, LIVESTOCK_TYPE) %>% dplyr::summarise(VALUE = sum(VALUE)) %>%
left_join(MAP_DEP, ., by="INSEE_DEP")
g <- ggplot(MAP_DEP) +
geom_sf(aes(fill = VALUE), color = "black", size = 0.2) +
coord_sf(datum = NA, expand = FALSE) +  # enlever l'affichage des coordonnés et de la grille
theme(panel.background = element_blank(), plot.title = element_text(hjust = 0.5, size = 16)) +
scale_fill_gradientn(colours = c("white", "orange","red")) +
facet_wrap(vars(LIVESTOCK_TYPE))
ggsave("test.pdf", g, w=10, h=8)
MAP_DEP <- fra_dep
test <- RA_livestock %>% dplyr::filter(is.na(VALUE) == F) %>%
dplyr::group_by(INSEE_REG, INSEE_DEP, LIVESTOCK_TYPE) %>% dplyr::summarise(VALUE = sum(VALUE))
MAP_DEP <- left_join(MAP_DEP, test, by="INSEE_DEP")
View(test)
MAP_DEP <- fra_dep
test <- RA_livestock %>%
dplyr::group_by(INSEE_REG, INSEE_DEP, LIVESTOCK_TYPE) %>% dplyr::summarise(VALUE = sum(VALUE))
MAP_DEP <- left_join(MAP_DEP, test, by="INSEE_DEP")
g <- ggplot(MAP_DEP) +
geom_sf(aes(fill = VALUE), color = "black", size = 0.2) +
coord_sf(datum = NA, expand = FALSE) +  # enlever l'affichage des coordonnés et de la grille
theme(panel.background = element_blank(), plot.title = element_text(hjust = 0.5, size = 16)) +
scale_fill_gradientn(colours = c("white", "orange","red")) +
facet_wrap(vars(LIVESTOCK_TYPE))
ggsave("test.pdf", g, w=10, h=8)
MAP_DEP <- fra_dep
test <- RA_livestock %>%
dplyr::group_by(INSEE_REG, INSEE_DEP, LIVESTOCK_TYPE) %>%
dplyr::summarise(VALUE = sum(VALUE, na/rm = T))
MAP_DEP <- left_join(MAP_DEP, test, by="INSEE_DEP")
g <- ggplot(MAP_DEP) +
geom_sf(aes(fill = VALUE), color = "black", size = 0.2) +
coord_sf(datum = NA, expand = FALSE) +  # enlever l'affichage des coordonnés et de la grille
theme(panel.background = element_blank(), plot.title = element_text(hjust = 0.5, size = 16)) +
scale_fill_gradientn(colours = c("white", "orange","red")) +
facet_wrap(vars(LIVESTOCK_TYPE))
ggsave("test.pdf", g, w=10, h=8)
MAP_DEP <- fra_dep
test <- RA_livestock %>% dplyr::filter(is.na(VALUE) == F) %>%
dplyr::group_by(INSEE_REG, INSEE_DEP, LIVESTOCK_TYPE) %>% dplyr::summarise(VALUE = sum(VALUE))
MAP_DEP <- left_join(MAP_DEP, test, by="INSEE_DEP")
unique(MAP_DEP$LIVESTOCK_TYPE)
MAP_DEP <- MAP_DEP %>% dplyr::filter(LIVESTOCK_TYPE == "Total_Equidés")
g <- ggplot(MAP_DEP) +
geom_sf(aes(fill = VALUE), color = "black", size = 0.2) +
coord_sf(datum = NA, expand = FALSE) +  # enlever l'affichage des coordonnés et de la grille
theme(panel.background = element_blank(), plot.title = element_text(hjust = 0.5, size = 16)) +
scale_fill_gradientn(colours = c("white", "orange","red"))
ggsave("test.pdf", g, w=10, h=8)
MAP_DEP <- fra_dep
test <- RA_livestock %>% dplyr::filter(is.na(VALUE) == F) %>%
dplyr::group_by(INSEE_REG, INSEE_DEP, LIVESTOCK_TYPE) %>% dplyr::summarise(VALUE = sum(VALUE))
MAP_DEP <- left_join(MAP_DEP, test, by="INSEE_DEP")
MAP_DEP <- MAP_DEP %>% dplyr::filter(LIVESTOCK_TYPE == "Total Equidés")
g <- ggplot(MAP_DEP) +
geom_sf(aes(fill = VALUE), color = "black", size = 0.2) +
coord_sf(datum = NA, expand = FALSE) +  # enlever l'affichage des coordonnés et de la grille
theme(panel.background = element_blank(), plot.title = element_text(hjust = 0.5, size = 16)) +
scale_fill_gradientn(colours = c("white", "orange","red"))
ggsave("test.pdf", g, w=10, h=8)
setwd("~/Documents/GitHub/nutrients_excretions_france")
#pop density ---------------------------------------------------------------------
#densité de pop
path <- "data/insee_cartes/demographie/structure_pop/densite_pop_2018/"
pop_density <- read.csv(paste(path, "densite_pop_2018_commune.csv", sep=""), sep=";") %>%
dplyr::rename(densite = densite_pop, INSEE_COM = Code) %>%
mutate(densite = as.numeric(densite))
g <- full_join(fra_comm, density, by = "INSEE_COM") %>%
ggplot() + labs(fill = "density") +
geom_sf(aes(fill = densite), size = 0, color = "black") +
coord_sf(datum = NA, expand = FALSE) +  # enlever l'affichage des coordonnés et de la grille
ggtitle("Densité") +  scale_fill_gradientn(colours = c("white", "orange","red")) +
theme(panel.background = element_blank(), plot.title = element_text(hjust = 0.5, size = 16))
ggsave("test.pdf", g, w=10, h=8)
